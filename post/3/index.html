<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"www.qiyunzhou.top","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#11a3fc","save":"auto"},"fancybox":true,"mediumzoom":false,"lazyload":true,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="oracle1.基本概念序列1create sequence 序列名  2. 表空间创建表空间12345create tablespace waterbossdatafile &amp;#x27;D:\app\HP\oradata\data\waterboss.dbf&amp;#x27;size 100mautoextend onnext 10m;  删除表空间(数据文件会一起删除) 1drop tablespa">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle">
<meta property="og:url" content="http://www.qiyunzhou.top/post/3/index.html">
<meta property="og:site_name" content="云州的博客">
<meta property="og:description" content="oracle1.基本概念序列1create sequence 序列名  2. 表空间创建表空间12345create tablespace waterbossdatafile &amp;#x27;D:\app\HP\oradata\data\waterboss.dbf&amp;#x27;size 100mautoextend onnext 10m;  删除表空间(数据文件会一起删除) 1drop tablespa">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/1.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/2.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/3.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/4.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/5.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/6.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/7.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/8.png">
<meta property="og:image" content="http://www.qiyunzhou.top/post/3/9.png">
<meta property="article:published_time" content="2021-10-06T14:56:36.000Z">
<meta property="article:modified_time" content="2022-03-06T13:12:09.749Z">
<meta property="article:author" content="yunzhou">
<meta property="article:tag" content="Oracle">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://www.qiyunzhou.top/post/3/1.png">

<link rel="canonical" href="http://www.qiyunzhou.top/post/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Oracle | 云州的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  
   <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas>
   <script type="text/javascript" src="/js/anime.js"></script> 
   <script type="text/javascript" src="/js/fireworks.js"></script>
  
  <script src="/live2d-widget/autoload.js"></script>
  
  <div class="container use-motion">

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">云州的博客</h1>
      <span class="logo-line-after">我们都是星尘</span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-words">

    <a href="/words/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>一言</a>

  </li>
        <li class="menu-item menu-item-links">

    <a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>友链</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://www.qiyunzhou.top/post/3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/boy.jpg">
      <meta itemprop="name" content="yunzhou">
      <meta itemprop="description" content="看呐！那朵云好像一朵云">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="云州的博客">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Oracle
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-10-06 22:56:36" itemprop="dateCreated datePublished" datetime="2021-10-06T22:56:36+08:00">2021-10-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2022-03-06 21:12:09" itemprop="dateModified" datetime="2022-03-06T21:12:09+08:00">2022-03-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>15k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>14 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="oracle"><a href="#oracle" class="headerlink" title="oracle"></a>oracle</h1><h2 id="1-基本概念"><a href="#1-基本概念" class="headerlink" title="1.基本概念"></a>1.基本概念</h2><h3 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> sequence 序列名</span><br></pre></td></tr></table></figure>

<h2 id="2-表空间"><a href="#2-表空间" class="headerlink" title="2. 表空间"></a>2. 表空间</h2><h3 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>space waterboss</span><br><span class="line">datafile <span class="string">&#x27;D:\app\HP\oradata\data\waterboss.dbf&#x27;</span></span><br><span class="line">size <span class="number">100</span>m</span><br><span class="line">autoextend <span class="keyword">on</span></span><br><span class="line">next <span class="number">10</span>m;</span><br></pre></td></tr></table></figure>

<h3 id="删除表空间"><a href="#删除表空间" class="headerlink" title="删除表空间"></a>删除表空间</h3><p>(数据文件会一起删除)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> tablespace waterboss including contents <span class="keyword">and</span>  datafiles;</span><br></pre></td></tr></table></figure>

<span id="more"></span>

<h3 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h3><h3 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">user</span> wateruser</span><br><span class="line">identified <span class="keyword">by</span> root(密码)</span><br><span class="line"><span class="keyword">default</span> tablespace waterboss;</span><br></pre></td></tr></table></figure>

<h3 id="创建用户失败"><a href="#创建用户失败" class="headerlink" title="创建用户失败"></a>创建用户失败</h3><p>ORA-65096: 公用用户名或角色名无效</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#oracle官方文档创建用户的时候用户名以c##或者C##开头</span><br><span class="line"><span class="keyword">alter</span> session <span class="keyword">set</span> &quot;_ORACLE_SCRIPT&quot;<span class="operator">=</span><span class="literal">true</span>;</span><br><span class="line"><span class="keyword">alter</span> session <span class="keyword">set</span> container<span class="operator">=</span>PDBORCL;</span><br></pre></td></tr></table></figure>

<h3 id="删除用户"><a href="#删除用户" class="headerlink" title="删除用户"></a>删除用户</h3><p>加了cascade就可以把用户连带的数据全部删掉。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">user</span> user_name cascade;</span><br></pre></td></tr></table></figure>

<h3 id="授予dba权限"><a href="#授予dba权限" class="headerlink" title="授予dba权限"></a>授予dba权限</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> dba <span class="keyword">to</span> wateruser;</span><br></pre></td></tr></table></figure>

<h3 id="解锁用户"><a href="#解锁用户" class="headerlink" title="解锁用户"></a>解锁用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> scott account unlock;</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">user</span> scott identified <span class="keyword">by</span> tiger(密码);</span><br></pre></td></tr></table></figure>

<h2 id="3-数据导入与导出"><a href="#3-数据导入与导出" class="headerlink" title="3. 数据导入与导出"></a>3. 数据导入与导出</h2><h3 id="导出"><a href="#导出" class="headerlink" title="导出"></a>导出</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exp <span class="keyword">system</span><span class="operator">/</span>root 添加参数 file<span class="operator">=</span>文件名 就是整库导出 <span class="keyword">full</span><span class="operator">=</span>y</span><br></pre></td></tr></table></figure>

<p>执行命令后会在当前目录下生成一个叫 EXPDAT.DMP的文件，此文件为备份文件。添加参数 full=y 就是整库导出，file参数可指定文件名</p>
<h3 id="导入"><a href="#导入" class="headerlink" title="导入"></a>导入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">imp <span class="keyword">system</span><span class="operator">/</span>itcast <span class="keyword">full</span><span class="operator">=</span>y file<span class="operator">=</span>water.dmp </span><br></pre></td></tr></table></figure>

<h3 id="按用户导出与导入"><a href="#按用户导出与导入" class="headerlink" title="按用户导出与导入"></a>按用户导出与导入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exp <span class="keyword">system</span><span class="operator">/</span>itcast owner<span class="operator">=</span>wateruser file<span class="operator">=</span>wateruser.dmp </span><br><span class="line">imp <span class="keyword">system</span><span class="operator">/</span>itcast  file<span class="operator">=</span>wateruser.dmp fromuser<span class="operator">=</span>wateruser </span><br></pre></td></tr></table></figure>

<h3 id="按表导出与导入"><a href="#按表导出与导入" class="headerlink" title="按表导出与导入"></a>按表导出与导入</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exp wateruser<span class="operator">/</span>itcast file<span class="operator">=</span>a.dmp tables<span class="operator">=</span>t_account,a_area </span><br><span class="line">imp wateruser<span class="operator">/</span>itcast file<span class="operator">=</span>a.dmp tables<span class="operator">=</span>t_account,a_area </span><br></pre></td></tr></table></figure>

<p>nextval :取得序列的下一个内容<br>currval :取得序列的当前内容</p>
<h2 id="4-PLSQL编程语言"><a href="#4-PLSQL编程语言" class="headerlink" title="4.PLSQL编程语言"></a>4.PLSQL编程语言</h2><h3 id="定义变量"><a href="#定义变量" class="headerlink" title="定义变量"></a>定义变量</h3><p>赋值操作可以使用:=也可以使用into查询语句赋值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">    i number(<span class="number">2</span>) :<span class="operator">=</span><span class="number">10</span>;</span><br><span class="line">		s varchar2(<span class="number">10</span>) :<span class="operator">=</span> <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line">		ena emp.ename<span class="operator">%</span>type;	<span class="comment">-- 引用型变量</span></span><br><span class="line">		emprow emp<span class="operator">%</span>rowtype; <span class="comment">--记录型变量</span></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">		dbms_output.put_line(s);</span><br><span class="line">		<span class="keyword">select</span> ename <span class="keyword">into</span> ena <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">7788</span>;</span><br><span class="line">		dbms_output.put_line(ena);</span><br><span class="line">		<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">into</span> emprow <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span><span class="number">7788</span>;</span><br><span class="line">		dbms_output.put_line(emprow.ename <span class="operator">||</span> <span class="string">&#x27;的工作为：&#x27;</span><span class="operator">||</span>emprow.job);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="if语句"><a href="#if语句" class="headerlink" title="if语句"></a>if语句</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---输入小于18的数字，输出未成年</span></span><br><span class="line"><span class="comment">---输入大于18小于40的数字，输出中年人</span></span><br><span class="line"><span class="comment">---输入大于40的数字，输出老年人</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i number(<span class="number">3</span>) :<span class="operator">=</span> <span class="operator">&amp;</span>i;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  if i<span class="operator">&lt;</span><span class="number">18</span> <span class="keyword">then</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;未成年&#x27;</span>);</span><br><span class="line">  elsif i<span class="operator">&lt;</span><span class="number">40</span> <span class="keyword">then</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;中年人&#x27;</span>);</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    dbms_output.put_line(<span class="string">&#x27;老年人&#x27;</span>);</span><br><span class="line">  <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><p>用三种方式输出1到10是个数字</p>
<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i number(<span class="number">2</span>) :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  while i <span class="operator">&lt;</span> <span class="number">11</span> loop</span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i :<span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="exit循环"><a href="#exit循环" class="headerlink" title="exit循环"></a>exit循环</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i number(<span class="number">2</span>) :<span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  loop</span><br><span class="line">    exit <span class="keyword">when</span> i <span class="operator">&gt;</span> <span class="number">10</span>;</span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i :<span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1</span> .. <span class="number">10</span> loop</span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">  <span class="keyword">end</span> loop;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h3><p>游标：可以存放多个对象，多行记录</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---输出emp表中所有员工的姓名</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  <span class="keyword">cursor</span> c1 <span class="keyword">is</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line">  emprow emp<span class="operator">%</span>rowtype;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   <span class="keyword">open</span> c1;</span><br><span class="line">        loop</span><br><span class="line">            <span class="keyword">fetch</span> c1 <span class="keyword">into</span> emprow;</span><br><span class="line">            exit <span class="keyword">when</span> c1<span class="operator">%</span>notfound;</span><br><span class="line">            dbms_output.put_line(emprow);</span><br><span class="line">        <span class="keyword">end</span> loop;</span><br><span class="line">   <span class="keyword">close</span> c1;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 给指定部门员工涨工资</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">   <span class="keyword">cursor</span> c2(eno emp.deptno<span class="operator">%</span>type) <span class="keyword">is</span> <span class="keyword">select</span> empno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno<span class="operator">=</span>eno;</span><br><span class="line">   en emp.empno<span class="operator">%</span>type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">open</span> c2(<span class="number">10</span>);</span><br><span class="line">       loop</span><br><span class="line">         <span class="keyword">fetch</span> c2 <span class="keyword">into</span> en;</span><br><span class="line">         exit <span class="keyword">when</span> c2<span class="operator">%</span>notfound;</span><br><span class="line">         update emp <span class="keyword">set</span> sal<span class="operator">=</span>sal<span class="number">-100</span> <span class="keyword">where</span> empno<span class="operator">=</span>en;</span><br><span class="line">         <span class="keyword">commit</span>;</span><br><span class="line">        <span class="keyword">end</span> loop;</span><br><span class="line">  <span class="keyword">close</span> c2;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p>存储过程就是一段提前编译好的sql语句，放置在数据库端，可以直接被调用</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> p1 (eno emp.empno<span class="operator">%</span>type) <span class="keyword">is</span> </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  update emp <span class="keyword">set</span> sal<span class="operator">=</span>sal<span class="operator">+</span><span class="number">100</span> <span class="keyword">where</span> empno<span class="operator">=</span>eno;</span><br><span class="line">  <span class="keyword">commit</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="存储函数"><a href="#存储函数" class="headerlink" title="存储函数"></a>存储函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">function</span> f_yearsal(eno emp.empno<span class="operator">%</span>type) <span class="keyword">return</span> number </span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">      res number(<span class="number">10</span>); </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal<span class="operator">*</span><span class="number">12</span><span class="operator">+</span>nvl(comm, <span class="number">0</span>) <span class="keyword">into</span> res <span class="keyword">from</span> emp <span class="keyword">where</span> empno <span class="operator">=</span> eno;</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 测试</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  res number(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  res :<span class="operator">=</span> f_yearsal(<span class="number">7788</span>);</span><br><span class="line">  dbms_output.put_line(res);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="out类型参数"><a href="#out类型参数" class="headerlink" title="out类型参数"></a>out类型参数</h3><p>in和out类型参数的区别是什么？<br>凡是涉及到into查询语句赋值或者:=赋值操作的参数，都必须使用out来修饰。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">procedure</span> p_yearsal(eno emp.empno<span class="operator">%</span>type, yearsal <span class="keyword">out</span> number) <span class="keyword">is</span></span><br><span class="line">    s number(<span class="number">10</span>); </span><br><span class="line">    c emp.comm<span class="operator">%</span>type;   </span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">select</span> sal<span class="operator">*</span><span class="number">12</span>,nvl(comm,<span class="number">0</span>) <span class="keyword">into</span> s,c <span class="keyword">from</span> emp <span class="keyword">where</span> empno<span class="operator">=</span>eno;</span><br><span class="line">    yearsal :<span class="operator">=</span> s<span class="operator">+</span>c;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 测试</span></span><br><span class="line"><span class="keyword">declare</span> </span><br><span class="line">    yearsal number(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">    p_yearsal(<span class="number">7788</span>,yearsal);</span><br><span class="line">    dbms_output.put_line(yearsal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="触发器"><a href="#触发器" class="headerlink" title="触发器"></a>触发器</h3><p>触发器，就是制定一个规则，在我们做增删改操作的时候，只要满足该规则，自动触发，无需调用。<br>    语句级触发器：不包含有for each row的触发器。<br>    行级触发器：包含有for each row的就是行级触发器。<br>    加for each row是为了使用:old或者:new对象或者一行记录。<br>语句级触发器    </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> t1 </span><br><span class="line">after</span><br><span class="line"><span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> person</span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  dbms_output.put_line(<span class="string">&#x27;一个新员工入职&#x27;</span>);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>行级别触发器</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---raise_application_error(-20001~-20999之间, &#x27;错误提示信息&#x27;);</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> t2</span><br><span class="line">before</span><br><span class="line">update</span><br><span class="line"><span class="keyword">on</span> emp</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">   if :old.sal<span class="operator">&gt;</span>:new.sal <span class="keyword">then</span></span><br><span class="line">       raise_application_error(<span class="number">-20001</span>,<span class="string">&#x27;不能给员工降薪&#x27;</span>);</span><br><span class="line">   <span class="keyword">end</span> if;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<p>触发器实现主键自增。【行级触发器】</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">---分析：在用户做插入操作的之前，拿到即将插入的数据，给该数据中的主键列赋值。</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> replace <span class="keyword">trigger</span> auid</span><br><span class="line">before</span><br><span class="line"><span class="keyword">insert</span></span><br><span class="line"><span class="keyword">on</span> person</span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="type">row</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> s_person.nextval <span class="keyword">into</span> :new.id <span class="keyword">from</span> dual;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h2 id="5-oracle函数"><a href="#5-oracle函数" class="headerlink" title="5.oracle函数"></a>5.oracle函数</h2><h3 id="5-1-数值型函数"><a href="#5-1-数值型函数" class="headerlink" title="5.1 数值型函数"></a>5.1 数值型函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ABS(X)</td>
<td>返回x的绝对值</td>
</tr>
<tr>
<td>sign(x)</td>
<td>返回x的正负值。若为正值返回1，负值返回-1，0返回0</td>
</tr>
<tr>
<td>ceil(x)</td>
<td>向上取整</td>
</tr>
<tr>
<td>floor(x)</td>
<td>向下取整</td>
</tr>
<tr>
<td>power(x,y)</td>
<td>返回x的y次幂</td>
</tr>
<tr>
<td>mod(x,y)</td>
<td>返回x除以y的余数</td>
</tr>
</tbody></table>
<h3 id="round-x，-y"><a href="#round-x，-y" class="headerlink" title="round(x，[y])"></a>round(x，[y])</h3><p>返回四舍五入后的值</p>
<p>如果y不为整数则截取y整数部分，<br>如果y&gt;0则四舍五入为y位小数，<br>如果y小于0则四舍五入到小数点向左第y位。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> round(<span class="number">5555.6666</span>,<span class="number">2.1</span>),round(<span class="number">5555.6666</span>,<span class="number">-2.6</span>),round(<span class="number">5555.6666</span>) <span class="keyword">from</span> dual;</span><br><span class="line">ROUND(<span class="number">5555.6666</span>,<span class="number">2.1</span>) ROUND(<span class="number">5555.6666</span>,<span class="number">-2.6</span>) ROUND(<span class="number">5555.6666</span>)</span><br><span class="line"><span class="comment">-------------------- --------------------- ----------------</span></span><br><span class="line">             <span class="number">5555.67</span>                  <span class="number">5600</span>             <span class="number">5556</span></span><br></pre></td></tr></table></figure>

<h2 id="trun-x，-y"><a href="#trun-x，-y" class="headerlink" title="trun(x，[y])"></a>trun(x，[y])</h2><p>返回x按精度y截取后的值 </p>
<p>如果y不为整数则截取y整数部分，<br>如果y&gt;0则截取到y位小数，<br>如果y小于0则截取到小数点向左第y位，小数前其它<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%95%B0%E6%8D%AE&spm=1001.2101.3001.7020">数据</a>用0表示</p>
<h3 id="5-2-字符型函数"><a href="#5-2-字符型函数" class="headerlink" title="5.2 字符型函数"></a>5.2 字符型函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>concat(c1,c2)</td>
<td>连接两个字符串</td>
</tr>
<tr>
<td>initcap(c1)</td>
<td>将字符串的第一个字母变为大写，其它字母小写</td>
</tr>
<tr>
<td>lower(c1)</td>
<td>将字符串全部转为小写</td>
</tr>
<tr>
<td>upper(c1)</td>
<td>将字符串全部转为大写</td>
</tr>
</tbody></table>
<h3 id="instr-c1-c2-x-y"><a href="#instr-c1-c2-x-y" class="headerlink" title="instr(c1,c2[,x],[y])"></a>instr(c1,c2[,x],[y])</h3><p>字符串中搜索字符位置</p>
<p>C1 被搜索的字符串<br>C2 希望搜索的字符串<br>x 搜索的开始位置,默认为1<br>y 第y次出现的位置,默认为1</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;oracle traning&#x27;</span>,<span class="string">&#x27;ra&#x27;</span>,<span class="number">1</span>,<span class="number">2</span>) instring <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">------------</span></span><br><span class="line"><span class="comment">-- 9</span></span><br></pre></td></tr></table></figure>

<h3 id="lpad-c1-n-c2"><a href="#lpad-c1-n-c2" class="headerlink" title="lpad(c1,n[,c2])"></a>lpad(c1,n[,c2])</h3><p>在左边添加字符。在字符串c1的左边用字符串c2填充，直到长度为n时为止</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> lpad(<span class="string">&#x27;杨&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">-----------------</span></span><br><span class="line"><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>杨</span><br></pre></td></tr></table></figure>

<h3 id="rpad-c1-n-c2"><a href="#rpad-c1-n-c2" class="headerlink" title="rpad(c1,n[,c2])"></a>rpad(c1,n[,c2])</h3><p>在字符串c1的右边用字符串c2填充，直到长度为n时为止</p>
<h3 id="ltrim-c1-c2"><a href="#ltrim-c1-c2" class="headerlink" title="ltrim(c1,[,c2])"></a>ltrim(c1,[,c2])</h3><p>删除左边出现的字符串</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">select</span> LTRIM(<span class="string">&#x27;   xiao gong jiang&#x27;</span>,<span class="string">&#x27; &#x27;</span>) text <span class="keyword">from</span> dual;</span><br><span class="line"> <span class="comment">---------------</span></span><br><span class="line">xiao gong jiang</span><br></pre></td></tr></table></figure>

<h3 id="rtrim-c1-c2"><a href="#rtrim-c1-c2" class="headerlink" title="rtrim(c1,[,c2])"></a>rtrim(c1,[,c2])</h3><p>删除右边出现的字符串</p>
<h3 id="replace-c1-c2-c3"><a href="#replace-c1-c2-c3" class="headerlink" title="replace(c1,c2[,c3])"></a>replace(c1,c2[,c3])</h3><p>将字符表达式值中，部分相同字符串，替换成新的字符串</p>
<p>c1 希望被替换的字符或变量<br>c2 被替换的字符串<br>c3 要替换的字符串，默认为空(即删除之意，不是空格)</p>
<h3 id="substr-c1-n1-n2"><a href="#substr-c1-n1-n2" class="headerlink" title="substr(c1,n1[,n2])"></a>substr(c1,n1[,n2])</h3><p>取子字符串。在字符表达式c1里，从n1开始取n2个字符;若不指定n2,则从第y个字符直到结束的字串.</p>
<h3 id="translate-c1-c2-c3"><a href="#translate-c1-c2-c3" class="headerlink" title="translate(c1,c2,c3)"></a>translate(c1,c2,c3)</h3><p>将字符表达式值中，指定字符替换为新字符.</p>
<p>c1 希望被替换的字符或变量<br>c2 查询原始的字符集<br>c3 替换新的字符集，将c2对应顺序字符，替换为c3对应顺序字符<br>如果c3长度大于c2，则c3长出后面的字符无效<br>如果c3长度小于c2，则c2长出后面的字符均替换为空(删除)<br>如果c3长度为0，则返回空字符串。<br>如果c2里字符重复，按首次位置为替换依据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;he love you&#x27;</span>,<span class="string">&#x27;he&#x27;</span>,<span class="string">&#x27;i&#x27;</span>),</span><br><span class="line">  <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;重庆的人&#x27;</span>,<span class="string">&#x27;重庆的&#x27;</span>,<span class="string">&#x27;上海男&#x27;</span>),</span><br><span class="line">  <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;重庆的人&#x27;</span>,<span class="string">&#x27;重庆的重庆&#x27;</span>,<span class="string">&#x27;北京男士们&#x27;</span>),</span><br><span class="line">  <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;重庆的人&#x27;</span>,<span class="string">&#x27;重庆的重庆&#x27;</span>,<span class="string">&#x27;1北京男士们&#x27;</span>),</span><br><span class="line">  <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;重庆的人&#x27;</span>,<span class="string">&#x27;1重庆的重庆&#x27;</span>,<span class="string">&#x27;北京男士们&#x27;</span>),</span><br><span class="line">  <span class="built_in">TRANSLATE</span>(<span class="string">&#x27;aeiou&#x27;</span>, <span class="string">&#x27;1aeiou&#x27;</span>,<span class="string">&#x27;1&#x27;</span>)<span class="keyword">from</span> dual;</span><br><span class="line">  <span class="comment">-----------------------------------------</span></span><br><span class="line">  i lov you,上海男人,北京男人,<span class="number">1</span>北京人,京男士人,<span class="keyword">null</span></span><br></pre></td></tr></table></figure>

<h3 id="trim-c1-from-c2"><a href="#trim-c1-from-c2" class="headerlink" title="trim(c1 from c2)"></a>trim(c1 from c2)</h3><p>删除左边和右边出现的字符串</p>
<h3 id="5-3-日期函数"><a href="#5-3-日期函数" class="headerlink" title="5.3 日期函数"></a>5.3 日期函数</h3><table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>sysydate</td>
<td>返回当前日期。</td>
</tr>
<tr>
<td>add_months(d1,n1)</td>
<td>返回在日期d1基础上再加n1个月后新的日期</td>
</tr>
<tr>
<td>last_day(d1)</td>
<td>返回本月最后一天的日期</td>
</tr>
<tr>
<td>months_between(d1,d2)</td>
<td>返回日期d1到日期d2之间的月数</td>
</tr>
</tbody></table>
<h3 id="round-d1-c1"><a href="#round-d1-c1" class="headerlink" title="round(d1[,c1])"></a>round(d1[,c1])</h3><p>给出日期d1按期间(参数c1)四舍五入后的期间的第一天日期</p>
<p>d1日期型,c1为字符型(参数)，c1默认为j（即最近0点日期)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> sysdate 当时日期,</span><br><span class="line">  <span class="number">2</span>  round(sysdate) 最近<span class="number">0</span>点日期,</span><br><span class="line">  <span class="number">3</span>  round(sysdate,<span class="string">&#x27;day&#x27;</span>) 最近星期日,</span><br><span class="line">  <span class="number">4</span>  round(sysdate,<span class="string">&#x27;month&#x27;</span>) 最近月初,</span><br><span class="line">  <span class="number">5</span>  round(sysdate,<span class="string">&#x27;q&#x27;</span>) 最近季初日期,</span><br><span class="line">  <span class="number">6</span>  round(sysdate,<span class="string">&#x27;year&#x27;</span>) 最近年初日期 <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line">当时日期    最近<span class="number">0</span>点日期 最近星期日  最近月初    最近季初日期 最近年初日期</span><br><span class="line"><span class="comment">----------- ----------- ----------- ----------- ------------ ------------</span></span><br><span class="line"><span class="number">2016</span><span class="number">-5</span><span class="number">-25</span> <span class="number">0</span> <span class="number">2016</span><span class="number">-5</span><span class="number">-25</span>   <span class="number">2016</span><span class="number">-5</span><span class="number">-22</span>   <span class="number">2016</span><span class="number">-6</span><span class="number">-1</span>    <span class="number">2016</span><span class="number">-7</span><span class="number">-1</span>     <span class="number">2016</span><span class="number">-1</span><span class="number">-1</span></span><br></pre></td></tr></table></figure>

<h3 id="trunc-d1-c1"><a href="#trunc-d1-c1" class="headerlink" title="trunc(d1[,c1])"></a>trunc(d1[,c1])</h3><p>返回日期d1所在期间(参数c1)的第一天日期</p>
<p>d1日期型,c1为字符型(参数)，c1默认为j（即当前日期)</p>
<p>c1对应的参数表:<br>最近0点日期: 取消参数c1或j<br>最近的星期日：day或dy或d (每周顺序：日，一，二，三，四，五，六）<br>最近月初日期：month或mon或mm或rm<br>最近季日期：q<br>最近年初日期：syear或year或yyyy或yyy或yy或y(多个y表示精度)<br>最近世纪初日期：cc或scc</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> sysdate 当时日期,</span><br><span class="line">  <span class="number">2</span>  trunc(sysdate) 今天日期,</span><br><span class="line">  <span class="number">3</span>  trunc(sysdate,<span class="string">&#x27;day&#x27;</span>) 本周星期日,</span><br><span class="line">  <span class="number">4</span>  trunc(sysdate,<span class="string">&#x27;month&#x27;</span>) 本月初,</span><br><span class="line">  <span class="number">5</span>  trunc(sysdate,<span class="string">&#x27;q&#x27;</span>) 本季初日期,</span><br><span class="line">  <span class="number">6</span>  trunc(sysdate,<span class="string">&#x27;year&#x27;</span>) 本年初日期 <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line">当时日期    今天日期    本周星期日  本月初      本季初日期  本年初日期</span><br><span class="line"><span class="comment">----------- ----------- ----------- ----------- ----------- -----------</span></span><br><span class="line"><span class="number">2016</span><span class="number">-5</span><span class="number">-25</span> <span class="number">0</span> <span class="number">2016</span><span class="number">-5</span><span class="number">-25</span>   <span class="number">2016</span><span class="number">-5</span><span class="number">-22</span>   <span class="number">2016</span><span class="number">-5</span><span class="number">-1</span>    <span class="number">2016</span><span class="number">-4</span><span class="number">-1</span>    <span class="number">2016</span><span class="number">-1</span><span class="number">-1</span></span><br></pre></td></tr></table></figure>

<h3 id="extract-c1-from-d1"><a href="#extract-c1-from-d1" class="headerlink" title="extract(c1 from d1)"></a>extract(c1 from d1)</h3><p>提取时间日期中的数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span></span><br><span class="line">  <span class="number">2</span>  <span class="built_in">extract</span>(<span class="keyword">hour</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 小时,</span><br><span class="line">  <span class="number">3</span>  <span class="built_in">extract</span>(<span class="keyword">minute</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 分钟,</span><br><span class="line">  <span class="number">4</span>  <span class="built_in">extract</span>(<span class="keyword">second</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 秒,</span><br><span class="line">  <span class="number">5</span>  <span class="built_in">extract</span>(<span class="keyword">DAY</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 日,</span><br><span class="line">  <span class="number">6</span>  <span class="built_in">extract</span>(<span class="keyword">MONTH</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 月,</span><br><span class="line">  <span class="number">7</span>  <span class="built_in">extract</span>(<span class="keyword">YEAR</span> <span class="keyword">from</span> <span class="type">timestamp</span> <span class="string">&#x27;2001-2-16 2:38:40 &#x27;</span> ) 年</span><br><span class="line">  <span class="number">8</span>   <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line">      小时       分钟         秒         日         月         年</span><br><span class="line"><span class="comment">---------- ---------- ---------- ---------- ---------- ----------</span></span><br><span class="line">         <span class="number">2</span>         <span class="number">38</span>         <span class="number">40</span>         <span class="number">16</span>          <span class="number">2</span>       <span class="number">2001</span></span><br></pre></td></tr></table></figure>



<h3 id="5-4转换函数"><a href="#5-4转换函数" class="headerlink" title="5.4转换函数"></a>5.4转换函数</h3><h3 id="TO-CHAR-x-c2-C3"><a href="#TO-CHAR-x-c2-C3" class="headerlink" title="TO_CHAR(x[[,c2],C3])"></a>TO_CHAR(x[[,c2],C3])</h3><p>将日期或数据转换为char数据类型</p>
<p>如果x为日期控制返回的月份和日份所使用的语言。<br>如果x为数字用来指定小数位和千分位的分隔符，以及货币符号。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- x为数据型时</span></span><br><span class="line">to_char(<span class="number">1210.73</span>, <span class="string">&#x27;9999.9&#x27;</span>) 返回 <span class="string">&#x27;1210.7&#x27;</span> </span><br><span class="line">to_char(<span class="number">1210.73</span>, <span class="string">&#x27;9,999.99&#x27;</span>) 返回 <span class="string">&#x27;1,210.73&#x27;</span> </span><br><span class="line">to_char(<span class="number">1210.73</span>, <span class="string">&#x27;$9,999.00&#x27;</span>) 返回 <span class="string">&#x27;$1,210.73&#x27;</span> </span><br><span class="line">to_char(<span class="number">21</span>, <span class="string">&#x27;000099&#x27;</span>) 返回 <span class="string">&#x27;000021&#x27;</span> </span><br><span class="line">to_char(<span class="number">852</span>,<span class="string">&#x27;xxxx&#x27;</span>) 返回<span class="string">&#x27; 354&#x27;</span> <span class="comment">-- 将10进制转换为16进制；</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- x为日期型,c2可用参数</span></span><br><span class="line">to_char(sysdate,<span class="string">&#x27;d&#x27;</span>) 每周第几天 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;dd&#x27;</span>) 每月第几天 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;ddd&#x27;</span>) 每年第几天 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;ww&#x27;</span>) 每年第几周 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;mm&#x27;</span>) 每年第几月 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;q&#x27;</span>) 每年第几季 </span><br><span class="line">to_char(sysdate,<span class="string">&#x27;yyyy&#x27;</span>) 年</span><br></pre></td></tr></table></figure>

<h3 id="TO-DATE-X-c2-c3"><a href="#TO-DATE-X-c2-c3" class="headerlink" title="TO_DATE(X[,c2[,c3]])"></a>TO_DATE(X[,c2[,c3]])</h3><p>将字符串X转化为日期型</p>
<p>c2,c3,字符型，参照to_char()</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SQL</span><span class="operator">&gt;</span> <span class="keyword">select</span> to_date(<span class="string">&#x27;199912&#x27;</span>,<span class="string">&#x27;yyyymm&#x27;</span>),</span><br><span class="line">  <span class="number">2</span>  to_date(<span class="string">&#x27;2000.05.20&#x27;</span>,<span class="string">&#x27;yyyy.mm.dd&#x27;</span>),</span><br><span class="line">  <span class="number">3</span>  (<span class="type">date</span> <span class="string">&#x27;2008-12-31&#x27;</span>) XXdate,</span><br><span class="line">  <span class="number">4</span>  to_date(<span class="string">&#x27;2008-12-31 12:31:30&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd hh24:mi:ss&#x27;</span>),</span><br><span class="line">  <span class="number">5</span>  (<span class="type">timestamp</span> <span class="string">&#x27;2008-12-31 12:31:30&#x27;</span>) XXtimestamp</span><br><span class="line">  <span class="number">6</span>  <span class="keyword">from</span> dual;</span><br><span class="line"></span><br><span class="line">TO_DATE(<span class="string">&#x27;199912&#x27;</span>,<span class="string">&#x27;YYYYMM&#x27;</span>) TO_DATE(<span class="string">&#x27;2000.05.20&#x27;</span>,<span class="string">&#x27;YYYY.MM. XXDATE TO_DATE(&#x27;</span><span class="number">2008</span><span class="number">-12</span><span class="number">-3112</span>:<span class="number">31</span>:<span class="number">30</span><span class="string">&#x27;,&#x27;</span> XXTIMESTAMP</span><br><span class="line"><span class="comment">-------------------------- ------------------------------ ----------- ------------------------------ --------------------------------------------------------------------------------</span></span><br><span class="line"><span class="number">1999</span><span class="number">-12</span><span class="number">-01</span>      <span class="number">2000</span><span class="number">-05</span><span class="number">-20</span>          <span class="number">2008</span><span class="number">-12</span><span class="number">-31</span> <span class="number">2008</span><span class="number">-12</span><span class="number">-31</span> <span class="number">12</span>:<span class="number">31</span>:<span class="number">30</span> <span class="number">31</span><span class="operator">-</span><span class="type">DEC</span><span class="number">-08</span> <span class="number">12.31</span><span class="number">.30</span><span class="number">.000000000</span> PM</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-5-其他函数"><a href="#5-5-其他函数" class="headerlink" title="5.5 其他函数"></a>5.5 其他函数</h3><h3 id="nvl-nvl2"><a href="#nvl-nvl2" class="headerlink" title="nvl() nvl2()"></a>nvl() nvl2()</h3><p>为空值赋值。</p>
<p>NVL (expr1, expr2) 【功能】若expr1为NULL，返回expr2；expr1不为NULL，返回expr1。</p>
<p>NVL2 (expr1, expr2, expr3) ,expr1不为NULL，返回expr2；expr2为NULL，返回expr3。</p>
<h3 id="COALESCE"><a href="#COALESCE" class="headerlink" title="COALESCE"></a>COALESCE</h3><p>返回第一个不为空的表达式，如果都为空则返回空值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">coalesce</span>(<span class="keyword">null</span> ,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>) <span class="keyword">from</span> dual;</span><br><span class="line"><span class="comment">------</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="查找空值"><a href="#查找空值" class="headerlink" title="查找空值"></a>查找空值</h3><h4 id="COALESCE-1"><a href="#COALESCE-1" class="headerlink" title="**COALESCE **"></a>**COALESCE **</h4><p>COALESCE ( expression,value1,value2……,valuen)  返回多个值中第一个不为空的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">coalesce</span>(<span class="keyword">null</span>, <span class="keyword">null</span> ,<span class="number">1</span> , <span class="number">0</span>) <span class="keyword">from</span> dual;</span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><h3 id="DECODE"><a href="#DECODE" class="headerlink" title="DECODE"></a>DECODE</h3><p>根据条件返回相应值。decode(条件,值1,翻译值1,值2,翻译值2,…值n,翻译值n,缺省值)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> decode(sex,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;男&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;其他&#x27;</span>) <span class="keyword">as</span> sex <span class="keyword">from</span> <span class="keyword">user</span>;</span><br></pre></td></tr></table></figure>



<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yangshangwei/article/details/51425458"> Oracle函数_小工匠-CSDN博客_oracle函数</a></p>
</blockquote>
<h3 id="5-6分析函数"><a href="#5-6分析函数" class="headerlink" title="5.6分析函数"></a>5.6分析函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">function_name(<span class="operator">&lt;</span>argument<span class="operator">&gt;</span>,<span class="operator">&lt;</span>argument<span class="operator">&gt;</span>...) <span class="keyword">over</span>(<span class="operator">&lt;</span>partition_Clause<span class="operator">&gt;</span><span class="operator">&lt;</span><span class="keyword">order</span> by_Clause<span class="operator">&gt;</span><span class="operator">&lt;</span>windowing_Clause<span class="operator">&gt;</span>);</span><br></pre></td></tr></table></figure>

<p>function_name()：函数名称</p>
<p>argument：参数</p>
<p>over( )：开窗函数</p>
<p>partition_Clause：分区子句，数据记录集分组，group by…</p>
<p>order by_Clause：排序子句，数据记录集排序，order by…</p>
<p>windowing_Clause：开窗子句，定义分析函数在操作行的集合，三种开窗方式：rows、range、Specifying</p>
<p><font color='red'>注：</font>使用开窗子句时一定要有排序子句</p>
<p>SUM() OVER() 统计分区中记录的总和</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,ename,sal,</span><br><span class="line">       <span class="built_in">sum</span>(sal) <span class="keyword">over</span> () 总和,</span><br><span class="line">       <span class="built_in">sum</span>(sal) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> deptno,sal) 连续求和,</span><br><span class="line">       <span class="built_in">sum</span>(sal) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno) 分组总和,</span><br><span class="line">       <span class="built_in">sum</span>(sal) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> sal) 组内连续求和</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="1.png"></p>
<p>COUNT() OVER() 统计分区中各组的行数</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> empno,deptno,</span><br><span class="line">       <span class="built_in">count</span>(empno) <span class="keyword">over</span> () 总和,</span><br><span class="line">       <span class="built_in">count</span>(empno) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> deptno,empno) 连续求和,</span><br><span class="line">       <span class="built_in">count</span>(empno) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno) 分组总和,</span><br><span class="line">       <span class="built_in">count</span>(empno) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> empno) 组内连续求和</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="2.png"></p>
<p>avg() over()  ：统计分区中记录的平均值，partition by 可选，order by 可选</p>
<p>min() over() ：统计分区中记录的最小值，partition by 可选，order by 可选</p>
<p>max() over() ：统计分区中记录的最大值，partition by 可选，order by 可选</p>
<p>rank() over()  ：跳跃排序</p>
<p>dense_rank() ：连续排序</p>
<p>row_number() over() ：排序，无重复值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.<span class="operator">*</span>,</span><br><span class="line">       <span class="built_in">rank</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> col2 <span class="keyword">order</span> <span class="keyword">by</span> col1) rank,</span><br><span class="line">       <span class="built_in">dense_rank</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> col2 <span class="keyword">order</span> <span class="keyword">by</span> col1) dense_rank,</span><br><span class="line">       <span class="built_in">row_number</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> col2 <span class="keyword">order</span> <span class="keyword">by</span> col1) num</span><br><span class="line"><span class="keyword">from</span> XGJ t;</span><br></pre></td></tr></table></figure>

<p><img data-src="3.png"></p>
<p><font color='red'>注：</font> rank和 dense_rank 主要的功能是计算一组数值中的排序值。<br>        dence_rank在并列关系是，相关等级不会跳过。rank则跳过.<br>        rank()是跳跃排序，有两个第二名时接下来就是第四名（同样是在各个分组内）<br>        dense_rank()l是连续排序，有两个第二名时仍然跟着第三名。</p>
<p>ntile(n) over() ：partition by 可选，order by 必选</p>
<p> n表示将分区内记录平均分成n份，多出的按照顺序依次分给前面的组</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ename,deptno,sal,</span><br><span class="line">       <span class="built_in">ntile</span>(<span class="number">5</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>) 均分,</span><br><span class="line">       <span class="built_in">ntile</span>(<span class="number">3</span>) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span>) 按组均分</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="4.png"></p>
<p>first_value() over() ：取出分区中第一条记录的字段值，partition by 可选，order by 可选</p>
<p>last_value() over() ：取出分区中最后一条记录的字段值，partition by 可选，order by 可选</p>
<p>lag() over() ：取出前n行数据，partition by 可选，order by 必选</p>
<p>lead() over() ：取出后n行数据，partition by 可选，order by 必选</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">lag</span>(EXPR,<span class="operator">&lt;</span><span class="keyword">OFFSET</span><span class="operator">&gt;</span>,<span class="operator">&lt;</span><span class="keyword">DEFAULT</span><span class="operator">&gt;</span>)</span><br><span class="line"><span class="built_in">LEAD</span>(EXPR,<span class="operator">&lt;</span><span class="keyword">OFFSET</span><span class="operator">&gt;</span>,<span class="operator">&lt;</span><span class="keyword">DEFAULT</span><span class="operator">&gt;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>EXPR是从其他行返回的表达式</li>
<li>OFFSET是缺省为1 的正数，表示相对行数。希望检索的当前行分区的偏移量</li>
<li>DEFAULT是在OFFSET表示的数目超出了分组的范围时返回的值。</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,ename,sal,</span><br><span class="line">       <span class="built_in">lag</span>(ename, <span class="number">1</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal)    next_ename,</span><br><span class="line">       <span class="built_in">lag</span>(ename, <span class="number">2</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal)    next_ename2,</span><br><span class="line">       <span class="built_in">lag</span>(ename, <span class="number">1</span>, <span class="number">0</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal) next_ename10,</span><br><span class="line">       <span class="built_in">lag</span>(ename, <span class="number">1</span>, <span class="number">1</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal) next_ename11,</span><br><span class="line">       <span class="built_in">lag</span>(ename, <span class="number">2</span>, <span class="number">0</span>) <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> sal) next_ename20</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="5.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.<span class="operator">*</span>,</span><br><span class="line">       <span class="built_in">lag</span>(stepid) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> caseid <span class="keyword">order</span> <span class="keyword">by</span> stepid) next_id,</span><br><span class="line">       <span class="built_in">lag</span>(actiondate) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> caseid <span class="keyword">order</span> <span class="keyword">by</span> stepid) next_date</span><br><span class="line"><span class="keyword">from</span> LEAD_TABLE t;</span><br></pre></td></tr></table></figure>

<p><img data-src="6.png"></p>
<p>ratio_to_report(a) over(partition by b) 按照b分组后a的值在所属分组中总值的占比,a的值必须为数值或数值型字段</p>
<p>partition by 可选，order by 不可选</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,ename,job,sal,</span><br><span class="line">       ratio_to_report(<span class="number">1</span>) <span class="keyword">over</span> () 行数比例, <span class="comment">--给每一行赋值1，求当前行在总值的占比</span></span><br><span class="line">       ratio_to_report(sal) <span class="keyword">over</span> () 工资比列, <span class="comment">--当前行的值在所有数据中的占比</span></span><br><span class="line">       ratio_to_report(<span class="number">1</span>) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno) 分组行数比例, <span class="comment">--给每一行赋值1，求当前行在分组后的组内总值的占比 </span></span><br><span class="line">       ratio_to_report(sal) <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno) 分组工资比例 <span class="comment">--当前行的值在分组后组内总值占比</span></span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p>percent_rank() over()  ：partition by 可选，order by 必选</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,ename,job,sal,</span><br><span class="line">       <span class="built_in">percent_rank</span>() <span class="keyword">over</span> (<span class="keyword">order</span> <span class="keyword">by</span> ename)</span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="7.png"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> deptno,ename,job,sal,</span><br><span class="line">       <span class="built_in">percent_rank</span>() <span class="keyword">over</span> (<span class="keyword">partition</span> <span class="keyword">by</span> deptno <span class="keyword">order</span> <span class="keyword">by</span> sal) <span class="keyword">percent</span></span><br><span class="line"><span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<p><img data-src="8.png"></p>
<p>MAX()   KEEP(DENSE_RANK FIRST/LAST)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 获取部门内年龄最小的人中，工资最高的记录</span></span><br><span class="line"><span class="keyword">select</span> dept,<span class="built_in">max</span>(sal) keep ( dense_rank <span class="keyword">first</span> <span class="keyword">order</span> <span class="keyword">by</span> age) <span class="keyword">from</span> keep <span class="keyword">group</span> <span class="keyword">by</span> dept;</span><br><span class="line"><span class="keyword">select</span> dept,<span class="built_in">max</span>(sal) keep ( dense_rank <span class="keyword">last</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span>) <span class="keyword">from</span> keep <span class="keyword">group</span> <span class="keyword">by</span> dept;</span><br><span class="line"><span class="comment">-- 获取部门内年龄最小的人中，工资最低的记录</span></span><br><span class="line"><span class="keyword">select</span> dept,<span class="built_in">min</span>(sal) keep ( dense_rank <span class="keyword">first</span> <span class="keyword">order</span> <span class="keyword">by</span> age) <span class="keyword">from</span> keep <span class="keyword">group</span> <span class="keyword">by</span> dept;</span><br><span class="line"><span class="comment">-- 年龄最大人中的最低工资查询</span></span><br><span class="line"><span class="keyword">select</span> dept,<span class="built_in">min</span>(sal) keep ( dense_rank <span class="keyword">first</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span> ) <span class="keyword">from</span> keep <span class="keyword">group</span> <span class="keyword">by</span> dept;</span><br><span class="line"><span class="keyword">select</span> dept,<span class="built_in">min</span>(sal) keep ( dense_rank <span class="keyword">last</span> <span class="keyword">order</span> <span class="keyword">by</span> age ) <span class="keyword">from</span> keep <span class="keyword">group</span> <span class="keyword">by</span> dept;</span><br></pre></td></tr></table></figure>

<p>KEEP<br>keep的意思就是“保持”，会保持满足括号内条件的记录，用ORDER BY 后自然会有FIRST和LAST了。</p>
<p>DENSE_RANK<br>DENSE_RANK是排序策略。例如，它会将两个第二名排在第一名之后，之后还是第三名排在第二名之后。</p>
<p>FIRST/LAST<br>FIRST/LAST就是对数据进行筛选</p>
<p>listagg() within group(order by )</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">       deptno <span class="operator">||</span><span class="string">&#x27;    &#x27;</span><span class="operator">||</span> <span class="built_in">listagg</span>(ename,<span class="string">&#x27;,&#x27;</span>) listagg1,</span><br><span class="line">       deptno <span class="operator">||</span><span class="string">&#x27;    &#x27;</span><span class="operator">||</span> <span class="built_in">listagg</span>(ename,<span class="string">&#x27;,&#x27;</span>) <span class="keyword">within</span> <span class="keyword">group</span> ( <span class="keyword">order</span> <span class="keyword">by</span> deptno,ENAME <span class="keyword">desc</span> ) listagg2</span><br><span class="line"><span class="keyword">from</span> emp</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> deptno;</span><br></pre></td></tr></table></figure>

<p><img data-src="9.png"></p>
<h4 id="listagg"><a href="#listagg" class="headerlink" title="listagg()"></a>listagg()</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	T .DEPTNO,</span><br><span class="line">	<span class="built_in">listagg</span> (T .ENAME, <span class="string">&#x27;,&#x27;</span>) <span class="keyword">WITHIN</span> <span class="keyword">GROUP</span> (<span class="keyword">ORDER</span> <span class="keyword">BY</span> T .ENAME) names</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	SCOTT.EMP T</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	T .DEPTNO <span class="operator">=</span> <span class="string">&#x27;20&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	T .DEPTNO</span><br></pre></td></tr></table></figure>

<h3 id="5-7-树状结构层级查询"><a href="#5-7-树状结构层级查询" class="headerlink" title="5.7 树状结构层级查询"></a>5.7 树状结构层级查询</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [LEVEL],<span class="operator">*</span></span><br><span class="line">　　FEOM table_name </span><br><span class="line">　　<span class="keyword">START</span> <span class="keyword">WITH</span> 条件<span class="number">1</span></span><br><span class="line">　　<span class="keyword">CONNECT</span> <span class="keyword">BY</span> PRIOR 条件<span class="number">2</span></span><br><span class="line">　　<span class="keyword">WHERE</span> 条件<span class="number">3</span></span><br><span class="line">　　<span class="keyword">ORDER</span>　<span class="keyword">BY</span>　排序字段</span><br><span class="line">说明：LEVEL<span class="comment">---伪列，用于表示树的层次</span></span><br><span class="line">　　　条件<span class="number">1</span><span class="comment">---根节点的限定条件，当然也可以放宽权限，以获得多个根节点，也就是获取多个树</span></span><br><span class="line">　　　条件<span class="number">2</span><span class="comment">---连接条件，目的就是给出父子之间的关系是什么，根据这个关系进行递归查询</span></span><br><span class="line">　　　条件<span class="number">3</span><span class="comment">---过滤条件，对所有返回的记录进行过滤。</span></span><br><span class="line">　　　排序字段<span class="comment">---对所有返回记录进行排序</span></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> t.dept_id,t.dept_name,t.dept_code,t.par_dept_id,level</span><br><span class="line"><span class="keyword">from</span> sys_dept t</span><br><span class="line"><span class="keyword">start</span> <span class="keyword">with</span> t.dept_id<span class="operator">=</span><span class="string">&#x27;40288ac45a3c1e8b015a3c28b4ae01d6&#x27;</span></span><br><span class="line"><span class="keyword">connect</span> <span class="keyword">by</span> prior t.dept_id<span class="operator">=</span>t.par_dept_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> level,t.dept_code;</span><br></pre></td></tr></table></figure>





<h3 id="Rollup"><a href="#Rollup" class="headerlink" title="Rollup"></a>Rollup</h3><p>ROLLUP，是GROUP BY子句的一种扩展，可以为每个分组返回小计记录以及为所有分组返回总计记录。</p>
<h3 id="Cube"><a href="#Cube" class="headerlink" title="Cube"></a>Cube</h3><p>CUBE，也是GROUP BY子句的一种扩展，可以返回每一个列组合的小计记录，同时在末尾加上总计记录。</p>
<h2 id="6-Oracle-常用系统包"><a href="#6-Oracle-常用系统包" class="headerlink" title="6. Oracle 常用系统包"></a>6. Oracle 常用系统包</h2><blockquote>
<p>Oracle常用系统包 <a target="_blank" rel="noopener" href="https://www.cnblogs.com/champaign/p/9468354.html">https://www.cnblogs.com/champaign/p/9468354.html</a></p>
</blockquote>
<h2 id="7-常用操作"><a href="#7-常用操作" class="headerlink" title="7. 常用操作"></a>7. 常用操作</h2><h3 id="7-1-拼接列"><a href="#7-1-拼接列" class="headerlink" title="7.1 拼接列"></a>7.1 拼接列</h3><p>可以用字符串连接符“||”将各列拼接起来</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> ENAME <span class="operator">||</span> <span class="string">&#x27;工作是&#x27;</span> <span class="operator">||</span> job MSG <span class="keyword">from</span> EMP <span class="keyword">where</span> DEPTNO <span class="operator">=</span> <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-2-限制返回的行数"><a href="#7-2-限制返回的行数" class="headerlink" title="7.2 限制返回的行数"></a>7.2 限制返回的行数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> rownum sn, t.<span class="operator">*</span> <span class="keyword">from</span> emp t <span class="keyword">where</span> rownum <span class="operator">&lt;=</span> <span class="number">2</span>)</span><br><span class="line"><span class="keyword">where</span> sn <span class="operator">&lt;=</span> <span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-随机返回n条记录"><a href="#7-3-随机返回n条记录" class="headerlink" title="7.3 随机返回n条记录"></a>7.3 随机返回n条记录</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> (<span class="keyword">select</span> EMPNO, ENAME <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> dbms_random.value())</span><br><span class="line"><span class="keyword">where</span> rownum <span class="operator">&lt;=</span> <span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<ul>
<li>ORDER BY 1 表示以select 的字段按第一个字段排序</li>
</ul>
<h3 id="7-4-排序"><a href="#7-4-排序" class="headerlink" title="7.4 排序"></a>7.4 排序</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ordery <span class="keyword">by</span> <span class="number">1</span>; <span class="comment">-- 按照第一列排序</span></span><br><span class="line">nulls <span class="keyword">first</span> <span class="comment">-- 空值在前</span></span><br><span class="line">nulls <span class="keyword">last</span> <span class="comment">-- 空值在后</span></span><br></pre></td></tr></table></figure>

<h3 id="7-5-in、exists"><a href="#7-5-in、exists" class="headerlink" title="7.5 in、exists"></a>7.5 in、exists</h3><p>如果子查询得出的结果集记录较少，主查询中的表较大且又有索引时应该用in, 反之如果外层的主查询记录较少，子查询中的表大，又有索引时使用exists</p>
<h4 id="7-6-行行比较"><a href="#7-6-行行比较" class="headerlink" title="7.6 行行比较"></a>7.6 行行比较</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> EMPNO,ENAME,JOB,DEPTNO <span class="keyword">from</span> EMP <span class="keyword">where</span> (ename, JOB, SAL) <span class="keyword">in</span> (<span class="keyword">select</span> ENAME,JOB, SAL <span class="keyword">from</span> emp2);</span><br></pre></td></tr></table></figure>

<h3 id="7-7-插入、更新与删除"><a href="#7-7-插入、更新与删除" class="headerlink" title="7.7 插入、更新与删除"></a>7.7 插入、更新与删除</h3><p>复制表的定义与数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 复制表结构及数据</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> emp;</span><br><span class="line"><span class="comment">-- 复制表结构</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> test <span class="keyword">as</span> <span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> test <span class="keyword">where</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>

<p><font color='red'>复制的表不包含索引、默认值等约束信息</font></p>
<h3 id="7-8-WITH-CHECK-OPTION"><a href="#7-8-WITH-CHECK-OPTION" class="headerlink" title="7.8 WITH  CHECK  OPTION"></a>7.8 WITH  CHECK  OPTION</h3><p>限制数据录入</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> ch_sal <span class="keyword">check</span> ( sal <span class="operator">&gt;</span> <span class="number">0</span>  );</span><br><span class="line"><span class="comment">-- 有些复杂条件不能使用</span></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> emp <span class="keyword">add</span> <span class="keyword">constraint</span> ch_hiredate <span class="keyword">check</span> ( hiredate <span class="operator">&gt;</span> sysdate );</span><br><span class="line"><span class="comment">-- ORA-02436: 日期或系统变量在 CHECK 约束条件中指定错误</span></span><br></pre></td></tr></table></figure>

<h3 id="7-9-多表插入"><a href="#7-9-多表插入" class="headerlink" title="7.9 多表插入"></a>7.9 多表插入</h3><h4 id="INSERT-ALL"><a href="#INSERT-ALL" class="headerlink" title="INSERT ALL"></a>INSERT ALL</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 无条件</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">all</span></span><br><span class="line">    <span class="keyword">into</span> emp1(empno, ename, job) <span class="keyword">values</span> (empno, ename, job)</span><br><span class="line">    <span class="keyword">into</span> emp2(empno, ename, deptno) <span class="keyword">values</span> (empno, ename, deptno)</span><br><span class="line">    <span class="keyword">select</span> empno, ename, job, deptno <span class="keyword">from</span> emp <span class="keyword">where</span> deptno <span class="keyword">in</span> (<span class="number">10</span>, <span class="number">20</span>);</span><br><span class="line"><span class="comment">-- 有条件</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">all</span></span><br><span class="line">    <span class="keyword">when</span> job <span class="keyword">in</span> (<span class="string">&#x27;job1&#x27;</span>, <span class="string">&#x27;job2&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">into</span> emp1(empno, ename, job) <span class="keyword">values</span> (empno, ename ,job)</span><br><span class="line">    <span class="keyword">when</span> deptno <span class="keyword">in</span> (<span class="number">10</span>, <span class="number">20</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">into</span> emp2(empno, ename, deptno) <span class="keyword">values</span> (empno, ename, deptno)</span><br><span class="line">    <span class="keyword">select</span> empno, ename, job, deptno <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h4 id="INSERT-FIRST"><a href="#INSERT-FIRST" class="headerlink" title="INSERT FIRST"></a>INSERT FIRST</h4><p>当第一个表符合条件后，第二个表将不再插入对应的行</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">first</span></span><br><span class="line">    <span class="keyword">when</span> job <span class="keyword">in</span> (<span class="string">&#x27;job1&#x27;</span>, <span class="string">&#x27;job2&#x27;</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">into</span> emp1(empno, ename, job) <span class="keyword">values</span> (empno, ename ,job)</span><br><span class="line">    <span class="keyword">when</span> deptno <span class="keyword">in</span> (<span class="number">10</span>, <span class="number">20</span>) <span class="keyword">then</span></span><br><span class="line">    <span class="keyword">into</span> emp2(empno, ename, deptno) <span class="keyword">values</span> (empno, ename, deptno)</span><br><span class="line">    <span class="keyword">select</span> empno, ename, job, deptno <span class="keyword">from</span> emp;</span><br></pre></td></tr></table></figure>

<h3 id="7-10-MERGE-INTO"><a href="#7-10-MERGE-INTO" class="headerlink" title="7.10 MERGE INTO"></a>7.10 MERGE INTO</h3><h2 id="8-执行计划"><a href="#8-执行计划" class="headerlink" title="8. 执行计划"></a>8. 执行计划</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在执行的<span class="keyword">sql</span>前加explain plan <span class="keyword">for</span></span><br><span class="line">#查看：</span><br><span class="line"><span class="keyword">select</span> plan_table_output <span class="keyword">from</span> <span class="keyword">table</span>(DBMS_XPLAN.DISPLAY(<span class="string">&#x27;PLAN_TABLE&#x27;</span>));</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">table</span>(dbms_xplan.display);</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">
          
          <div class="post-tags">
              <a href="/tags/Oracle/" rel="tag"><i class="fa fa-tag"></i> Oracle</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/post/2/" rel="prev" title="docker">
      <i class="fa fa-chevron-left"></i> docker
    </a></div>
      <div class="post-nav-item">
    <a href="/post/5/" rel="next" title="mybatis-plus lambda链式调用">
      mybatis-plus lambda链式调用 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#oracle"><span class="nav-text">oracle</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">1.基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%8F%E5%88%97"><span class="nav-text">序列</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="nav-text">2. 表空间</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="nav-text">创建表空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E8%A1%A8%E7%A9%BA%E9%97%B4"><span class="nav-text">删除表空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7"><span class="nav-text">用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="nav-text">创建用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E5%A4%B1%E8%B4%A5"><span class="nav-text">创建用户失败</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-text">删除用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8E%88%E4%BA%88dba%E6%9D%83%E9%99%90"><span class="nav-text">授予dba权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E9%94%81%E7%94%A8%E6%88%B7"><span class="nav-text">解锁用户</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E4%B8%8E%E5%AF%BC%E5%87%BA"><span class="nav-text">3. 数据导入与导出</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%87%BA"><span class="nav-text">导出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E5%85%A5"><span class="nav-text">导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E7%94%A8%E6%88%B7%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AF%BC%E5%85%A5"><span class="nav-text">按用户导出与导入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%89%E8%A1%A8%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AF%BC%E5%85%A5"><span class="nav-text">按表导出与导入</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-PLSQL%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80"><span class="nav-text">4.PLSQL编程语言</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F"><span class="nav-text">定义变量</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#if%E8%AF%AD%E5%8F%A5"><span class="nav-text">if语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF"><span class="nav-text">循环</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="nav-text">while循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#exit%E5%BE%AA%E7%8E%AF"><span class="nav-text">exit循环</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="nav-text">for循环</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B8%B8%E6%A0%87"><span class="nav-text">游标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="nav-text">存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%98%E5%82%A8%E5%87%BD%E6%95%B0"><span class="nav-text">存储函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#out%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="nav-text">out类型参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A6%E5%8F%91%E5%99%A8"><span class="nav-text">触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-oracle%E5%87%BD%E6%95%B0"><span class="nav-text">5.oracle函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E6%95%B0%E5%80%BC%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="nav-text">5.1 数值型函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#round-x%EF%BC%8C-y"><span class="nav-text">round(x，[y])</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#trun-x%EF%BC%8C-y"><span class="nav-text">trun(x，[y])</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%87%BD%E6%95%B0"><span class="nav-text">5.2 字符型函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#instr-c1-c2-x-y"><span class="nav-text">instr(c1,c2[,x],[y])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#lpad-c1-n-c2"><span class="nav-text">lpad(c1,n[,c2])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rpad-c1-n-c2"><span class="nav-text">rpad(c1,n[,c2])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ltrim-c1-c2"><span class="nav-text">ltrim(c1,[,c2])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rtrim-c1-c2"><span class="nav-text">rtrim(c1,[,c2])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#replace-c1-c2-c3"><span class="nav-text">replace(c1,c2[,c3])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#substr-c1-n1-n2"><span class="nav-text">substr(c1,n1[,n2])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#translate-c1-c2-c3"><span class="nav-text">translate(c1,c2,c3)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trim-c1-from-c2"><span class="nav-text">trim(c1 from c2)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-3-%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="nav-text">5.3 日期函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#round-d1-c1"><span class="nav-text">round(d1[,c1])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trunc-d1-c1"><span class="nav-text">trunc(d1[,c1])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#extract-c1-from-d1"><span class="nav-text">extract(c1 from d1)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-4%E8%BD%AC%E6%8D%A2%E5%87%BD%E6%95%B0"><span class="nav-text">5.4转换函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TO-CHAR-x-c2-C3"><span class="nav-text">TO_CHAR(x[[,c2],C3])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TO-DATE-X-c2-c3"><span class="nav-text">TO_DATE(X[,c2[,c3]])</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-5-%E5%85%B6%E4%BB%96%E5%87%BD%E6%95%B0"><span class="nav-text">5.5 其他函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nvl-nvl2"><span class="nav-text">nvl() nvl2()</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#COALESCE"><span class="nav-text">COALESCE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E7%A9%BA%E5%80%BC"><span class="nav-text">查找空值</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#COALESCE-1"><span class="nav-text">**COALESCE **</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link"><span class="nav-text"></span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DECODE"><span class="nav-text">DECODE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-6%E5%88%86%E6%9E%90%E5%87%BD%E6%95%B0"><span class="nav-text">5.6分析函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#listagg"><span class="nav-text">listagg()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-7-%E6%A0%91%E7%8A%B6%E7%BB%93%E6%9E%84%E5%B1%82%E7%BA%A7%E6%9F%A5%E8%AF%A2"><span class="nav-text">5.7 树状结构层级查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rollup"><span class="nav-text">Rollup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Cube"><span class="nav-text">Cube</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Oracle-%E5%B8%B8%E7%94%A8%E7%B3%BB%E7%BB%9F%E5%8C%85"><span class="nav-text">6. Oracle 常用系统包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-text">7. 常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E6%8B%BC%E6%8E%A5%E5%88%97"><span class="nav-text">7.1 拼接列</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E9%99%90%E5%88%B6%E8%BF%94%E5%9B%9E%E7%9A%84%E8%A1%8C%E6%95%B0"><span class="nav-text">7.2 限制返回的行数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%E9%9A%8F%E6%9C%BA%E8%BF%94%E5%9B%9En%E6%9D%A1%E8%AE%B0%E5%BD%95"><span class="nav-text">7.3 随机返回n条记录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-%E6%8E%92%E5%BA%8F"><span class="nav-text">7.4 排序</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-in%E3%80%81exists"><span class="nav-text">7.5 in、exists</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-6-%E8%A1%8C%E8%A1%8C%E6%AF%94%E8%BE%83"><span class="nav-text">7.6 行行比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-%E6%8F%92%E5%85%A5%E3%80%81%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%88%A0%E9%99%A4"><span class="nav-text">7.7 插入、更新与删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-8-WITH-CHECK-OPTION"><span class="nav-text">7.8 WITH  CHECK  OPTION</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-9-%E5%A4%9A%E8%A1%A8%E6%8F%92%E5%85%A5"><span class="nav-text">7.9 多表插入</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#INSERT-ALL"><span class="nav-text">INSERT ALL</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#INSERT-FIRST"><span class="nav-text">INSERT FIRST</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-10-MERGE-INTO"><span class="nav-text">7.10 MERGE INTO</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-%E6%89%A7%E8%A1%8C%E8%AE%A1%E5%88%92"><span class="nav-text">8. 执行计划</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="yunzhou"
      src="/uploads/boy.jpg">
  <p class="site-author-name" itemprop="name">yunzhou</p>
  <div class="site-description" itemprop="description">看呐！那朵云好像一朵云</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">11</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">13</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/qiyunzhou" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;qiyunzhou" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:15086314018@163.com" title="E-Mail → mailto:15086314018@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bug/" rel="tag">Bug</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Oracle/" rel="tag">Oracle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RocketMQ/" rel="tag">RocketMQ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker/" rel="tag">docker</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/" rel="tag">gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/maven/" rel="tag">maven</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/uml/" rel="tag">uml</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%90%8E%E5%8F%B0/" rel="tag">后台</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" rel="tag">定时任务</a><span class="tag-list-count">1</span></li></ul>
        </canvas>
    </div>
</div>


      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">yunzhou</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">154k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">2:20</span>
</div>

</br>
<a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">黔ICP备20001576号-1</a>
</br>
<a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=52052202522527" style="display:inline-block;text-decoration:none;height:20px;line-height:20px;"><img src="/uploads/beian.png" style="float:left;"/><p style="float:left;height:20px;line-height:20px;margin: 0px 0px 0px 5px; color:#939393;">贵公网安备 52052202522527号</p></a>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script>
  <script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
